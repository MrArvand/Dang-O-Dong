{"ast":null,"code":"import React,{useState}from'react';import{ShareIcon,CheckIcon}from'@heroicons/react/24/outline';import{generateShareUrl,copyToClipboard}from'../utils/shareUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShareButton=_ref=>{let{members,expenses}=_ref;const[isCopied,setIsCopied]=useState(false);const[isLoading,setIsLoading]=useState(false);const handleShare=async()=>{if(members.length===0&&expenses.length===0){alert('ابتدا اعضا و هزینه‌ها را اضافه کنید');return;}setIsLoading(true);try{const shareUrl=generateShareUrl(members,expenses);if(!shareUrl){alert('خطا در ایجاد لینک اشتراک‌گذاری');return;}const success=await copyToClipboard(shareUrl);if(success){setIsCopied(true);setTimeout(()=>setIsCopied(false),2000);}else{alert('خطا در کپی کردن لینک');}}catch(error){console.error('Error sharing:',error);alert('خطا در اشتراک‌گذاری');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"button\",{onClick:handleShare,disabled:isLoading||members.length===0&&expenses.length===0,className:\"btn-primary flex items-center gap-1 sm:gap-2 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm px-2 sm:px-4 py-2\",title:\"\\u0627\\u0634\\u062A\\u0631\\u0627\\u06A9\\u200C\\u06AF\\u0630\\u0627\\u0631\\u06CC \\u0628\\u0627 \\u062F\\u0648\\u0633\\u062A\\u0627\\u0646\",children:[isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 sm:w-4 sm:h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"}):isCopied?/*#__PURE__*/_jsx(CheckIcon,{className:\"w-3 h-3 sm:w-4 sm:h-4\"}):/*#__PURE__*/_jsx(ShareIcon,{className:\"w-3 h-3 sm:w-4 sm:h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:isCopied?'کپی شد!':'اشتراک‌گذاری'})]});};export default ShareButton;","map":{"version":3,"names":["React","useState","ShareIcon","CheckIcon","generateShareUrl","copyToClipboard","jsx","_jsx","jsxs","_jsxs","ShareButton","_ref","members","expenses","isCopied","setIsCopied","isLoading","setIsLoading","handleShare","length","alert","shareUrl","success","setTimeout","error","console","onClick","disabled","className","title","children"],"sources":["/home/runner/work/Dang-O-Dong/Dang-O-Dong/src/components/ShareButton.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { ShareIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport { generateShareUrl, copyToClipboard } from '../utils/shareUtils';\n\nconst ShareButton = ({ members, expenses }) => {\n    const [isCopied, setIsCopied] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    const handleShare = async () => {\n        if (members.length === 0 && expenses.length === 0) {\n            alert('ابتدا اعضا و هزینه‌ها را اضافه کنید');\n            return;\n        }\n\n        setIsLoading(true);\n\n        try {\n            const shareUrl = generateShareUrl(members, expenses);\n            if (!shareUrl) {\n                alert('خطا در ایجاد لینک اشتراک‌گذاری');\n                return;\n            }\n\n            const success = await copyToClipboard(shareUrl);\n            if (success) {\n                setIsCopied(true);\n                setTimeout(() => setIsCopied(false), 2000);\n            } else {\n                alert('خطا در کپی کردن لینک');\n            }\n        } catch (error) {\n            console.error('Error sharing:', error);\n            alert('خطا در اشتراک‌گذاری');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <button\n            onClick={handleShare}\n            disabled={isLoading || (members.length === 0 && expenses.length === 0)}\n            className=\"btn-primary flex items-center gap-1 sm:gap-2 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm px-2 sm:px-4 py-2\"\n            title=\"اشتراک‌گذاری با دوستان\"\n        >\n            {isLoading ? (\n                <div className=\"w-3 h-3 sm:w-4 sm:h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n            ) : isCopied ? (\n                <CheckIcon className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n            ) : (\n                <ShareIcon className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n            )}\n            <span className=\"hidden sm:inline\">{isCopied ? 'کپی شد!' : 'اشتراک‌گذاری'}</span>\n        </button>\n    );\n};\n\nexport default ShareButton;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,SAAS,CAAEC,SAAS,KAAQ,6BAA6B,CAClE,OAASC,gBAAgB,CAAEC,eAAe,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExE,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAA2B,IAA1B,CAAEC,OAAO,CAAEC,QAAS,CAAC,CAAAF,IAAA,CACtC,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAiB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAIN,OAAO,CAACO,MAAM,GAAK,CAAC,EAAIN,QAAQ,CAACM,MAAM,GAAK,CAAC,CAAE,CAC/CC,KAAK,CAAC,qCAAqC,CAAC,CAC5C,OACJ,CAEAH,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACA,KAAM,CAAAI,QAAQ,CAAGjB,gBAAgB,CAACQ,OAAO,CAAEC,QAAQ,CAAC,CACpD,GAAI,CAACQ,QAAQ,CAAE,CACXD,KAAK,CAAC,gCAAgC,CAAC,CACvC,OACJ,CAEA,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAAjB,eAAe,CAACgB,QAAQ,CAAC,CAC/C,GAAIC,OAAO,CAAE,CACTP,WAAW,CAAC,IAAI,CAAC,CACjBQ,UAAU,CAAC,IAAMR,WAAW,CAAC,KAAK,CAAC,CAAE,IAAI,CAAC,CAC9C,CAAC,IAAM,CACHK,KAAK,CAAC,sBAAsB,CAAC,CACjC,CACJ,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtCJ,KAAK,CAAC,qBAAqB,CAAC,CAChC,CAAC,OAAS,CACNH,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAED,mBACIR,KAAA,WACIiB,OAAO,CAAER,WAAY,CACrBS,QAAQ,CAAEX,SAAS,EAAKJ,OAAO,CAACO,MAAM,GAAK,CAAC,EAAIN,QAAQ,CAACM,MAAM,GAAK,CAAG,CACvES,SAAS,CAAC,mIAAmI,CAC7IC,KAAK,CAAC,4HAAwB,CAAAC,QAAA,EAE7Bd,SAAS,cACNT,IAAA,QAAKqB,SAAS,CAAC,4FAA4F,CAAM,CAAC,CAClHd,QAAQ,cACRP,IAAA,CAACJ,SAAS,EAACyB,SAAS,CAAC,uBAAuB,CAAE,CAAC,cAE/CrB,IAAA,CAACL,SAAS,EAAC0B,SAAS,CAAC,uBAAuB,CAAE,CACjD,cACDrB,IAAA,SAAMqB,SAAS,CAAC,kBAAkB,CAAAE,QAAA,CAAEhB,QAAQ,CAAG,SAAS,CAAG,cAAc,CAAO,CAAC,EAC7E,CAAC,CAEjB,CAAC,CAED,cAAe,CAAAJ,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}