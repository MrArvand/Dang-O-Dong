import isPersian from '../source/lib/isPersian';
import toPersianChars from '../source/lib/toPersianChars';

import WordsToNumber from '../source/lib/WordsToNumber';
import NumberToWords from '../source/lib/NumberToWords';

import verifyCardNumber from '../source/lib/verifyCardNumber';
import getBankNameFromCardNumber from '../source/lib/getBankNameFromCardNumber';

import {digitsEnToFa} from '../source/lib/digits';
import {digitsFaToEn} from '../source/lib/digits';
import {digitsArToFa} from '../source/lib/digits';
import {digitsArToEn} from '../source/lib/digits';

import URLfix from '../source/lib/URLfix';
import SortText from '../source/lib/SortText';

import verifyIranianNationalId from '../source/lib/nationalId';
import getPlaceByIranNationalId from '../source/lib/getPlaceByIranNationalId';

describe('Persian Tools', () => {
    it('WordsToNumber', () => {
        let wordFn = new WordsToNumber();

        expect(wordFn.convert('منفی سه هزارمین', { digits: 'fa', addCommas: true })).toEqual("-۳,۰۰۰");
        expect(wordFn.convert('منفی سه هزارمین', { digits: 'fa'})).toEqual("-۳۰۰۰");
        expect(wordFn.convert('منفی سه هزارمین')).toEqual(-3000);
        expect(wordFn.convert('منفی سه هزارم')).toEqual(-3000);
        expect(wordFn.convert('منفی سه هزار')).toEqual(-3000);
        expect(wordFn.convert('سه هزار دویست و دوازده')).toEqual(3212);
        expect(wordFn.convert('منفی سه هزارمین')).not.toEqual("-3000");
        expect(String(wordFn.convert('منفی سه هزارمین'))).toHaveLength(5);

        expect(wordFn.convert('دوازده هزار بیست دو')).toEqual(12022)
        expect(wordFn.convert('دوازده هزار بیست دو', {addCommas: true})).toEqual("12,022")
    });

    it('NumberToWords', () => {
        expect(NumberToWords(500443)).toEqual("پانصد هزار و چهار صد و چهل و سه");
        expect(NumberToWords("500,443")).toEqual("پانصد هزار و چهار صد و چهل و سه");
        expect(NumberToWords(500)).toHaveLength(5);
        expect(NumberToWords(30000000000)).toEqual("سی میلیارد");
    });

    it('isPersian', () => {
        expect(isPersian("این یک متن فارسی است؟")).not.toBeFalsy();
        expect(isPersian("Lorem Ipsum Test")).toBeFalsy();
    });

    it('toPersianChars', () => {
        expect(toPersianChars("علي")).toEqual("علی");
    });

    it('digitsArToFa', () => {
        expect(digitsArToFa("٠١٢٣٤٥٦٧٨٩")).toEqual("۰۱۲۳۴۵۶۷۸۹");
        expect(digitsArToFa("۸۹123۴۵")).toEqual("۸۹123۴۵");
        expect(digitsArToFa(456128)).toEqual("456128");
        expect(digitsArToFa()).toBeUndefined();
        expect(digitsArToFa("")).toBeUndefined();
        expect(digitsArToFa("Text ٠١٢٣٤٥٦٧٨٩")).toEqual("Text ۰۱۲۳۴۵۶۷۸۹");
    });


    it('digitsArToEn', () => {
        expect(digitsArToEn("٠١٢٣٤٥٦٧٨٩")).toEqual("0123456789");
        expect(digitsArToEn("٨٩123٤٥")).toEqual("8912345");
        expect(digitsArToEn(456128)).toEqual("456128");

        expect(digitsArToEn()).toBeUndefined();
        expect(digitsArToEn("")).toBeUndefined();

        expect(digitsArToEn("Text ٠١٢٣٤٥٦٧٨٩")).toEqual("Text 0123456789");
    });

    it('digitsEnToFa', () => {
        expect(digitsEnToFa("123۴۵۶")).toEqual("۱۲۳۴۵۶");
        expect(digitsEnToFa("٤٥٦")).toEqual("٤٥٦");
        expect(digitsEnToFa("123۴۵۶")).toEqual("۱۲۳۴۵۶");
        expect(digitsEnToFa()).toBeUndefined();
        expect(digitsEnToFa("")).toBeUndefined();
    });

    it('digitsFaToEn', () => {
        expect(digitsFaToEn("123۴۵۶")).toEqual("123456");
        expect(digitsFaToEn("۸۹123۴۵")).toEqual("8912345");
        expect(digitsFaToEn("۰۱۲۳۴۵۶۷۸۹")).toEqual("0123456789");
        expect(digitsFaToEn()).toBeUndefined();
        expect(digitsFaToEn("")).toBeUndefined();
    });

    it('URLfix', () => {
        expect(URLfix("https://fa.wikipedia.org/wiki/%D9%85%D8%AF%DB%8C%D8%A7%D9%88%DB%8C%DA%A9%DB%8C:Gadget-Extra-Editbuttons-botworks.js")).toEqual("https://fa.wikipedia.org/wiki/مدیاویکی:Gadget-Extra-Editbuttons-botworks.js");
        expect(URLfix("https://en.wikipedia.org/wiki/Persian_alphabet")).toEqual("https://en.wikipedia.org/wiki/Persian_alphabet");
        expect(URLfix()).toBeUndefined();
        expect(URLfix("Sample Text")).toEqual("Sample Text");
    });

    it('SortText', () => {
        expect(SortText("سلام علی ترکی")).toEqual(["ترکی", "سلام", "علی"]);
    });

    it('Check Bank card number validation', () => {
        expect(verifyCardNumber(6037701689095443)).not.toBeFalsy();
        expect(verifyCardNumber(6219861034529007)).not.toBeFalsy();
        expect(verifyCardNumber(6219861034529008)).toBeFalsy();
    });

    it("Get Bank name from card number", () => {
        expect(getBankNameFromCardNumber(6037701689095443)).toEqual("بانک کشاورزی");
        expect(getBankNameFromCardNumber(6219861034529007)).toEqual("بانک سامان");
        expect(getBankNameFromCardNumber("6219861034529007")).toEqual("بانک سامان");

        expect(getBankNameFromCardNumber()).toBeUndefined();
        expect(getBankNameFromCardNumber("")).toBeUndefined();
    });

    it("Verify Iranian National-ID", () => {
        expect(verifyIranianNationalId("0499370899")).not.toBeFalsy();
        expect(verifyIranianNationalId("0790419904")).not.toBeFalsy();
        expect(verifyIranianNationalId("0084575948")).not.toBeFalsy();
        expect(verifyIranianNationalId("0963695398")).not.toBeFalsy();
        expect(verifyIranianNationalId("0684159414")).not.toBeFalsy();
        expect(verifyIranianNationalId("0067749828")).not.toBeFalsy();

        expect(verifyIranianNationalId("")).toBeUndefined();
    });

    it("Get Place by Iranian National-ID", () => {
        expect(getPlaceByIranNationalId("0499370899").city).toEqual("شهرری");
        expect(getPlaceByIranNationalId("0790419904").city).toEqual("سبزوار");
        expect(getPlaceByIranNationalId("0084575948").city).toEqual("تهران مرکزی");
        expect(getPlaceByIranNationalId("0060495219").city).toEqual("تهران مرکزی");
        expect(getPlaceByIranNationalId("0671658506").city).toEqual("بجنورد");
        expect(getPlaceByIranNationalId("0671658506").city).toEqual("بجنورد");
        expect(getPlaceByIranNationalId("0643005846").city).toEqual("بیرجند");
        expect(getPlaceByIranNationalId("0906582709").city).toEqual("کاشمر");
        expect(getPlaceByIranNationalId("0451727304").city).toEqual("شمیران");
        expect(getPlaceByIranNationalId("0371359058").city).toEqual("قم");

        expect(getPlaceByIranNationalId("0084545948")).toEqual("Invalid national-id");

        expect(getPlaceByIranNationalId("")).toBeUndefined();
        expect(getPlaceByIranNationalId()).toBeUndefined();
    });
})
