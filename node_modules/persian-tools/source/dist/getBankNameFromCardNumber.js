'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _verifyCardNumber = require('./verifyCardNumber');

var _verifyCardNumber2 = _interopRequireDefault(_verifyCardNumber);

var _banksCode = require('../dummy/banksCode.json');

var _banksCode2 = _interopRequireDefault(_banksCode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getBankNameFromCardNumber(digits) {
    if (digits) {
        if ((0, _verifyCardNumber2.default)(digits)) {
            var code = digits.toString().substr(0, 6);
            try {
                var findBank = _banksCode2.default.find(function (bank) {
                    return bank.code === code;
                });

                if (findBank) {
                    return findBank.name;
                }

                throw new Error('Not found any matches bank with your card number');
            } catch (error) {
                return error;
            }
        } else {
            return { error: -1, message: 'Invalid Card-Number!' };
        }
    }
}

exports.default = getBankNameFromCardNumber;